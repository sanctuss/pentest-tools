#!/usr/bin/python3.6
import random
from termcolor import cprint
import nmap
import os

def genip():
    a = random.randint(1, 255)
    b = random.randint(1, 255)
    c = random.randint(1, 255)
    d = random.randint(1, 255)
    ip = str(a) + '.' + str(b) + '.' + str(c) + '.' + str(d)
    return ip

def ifhostup(host):
    response = os.system("ping -c 1 " + host)
    if response == 0:
        return False
    else:
        return True

def main():
    while True:
         cprint("[*] genering ip", 'red')
         ip = genip()
         lol = "[*]" + str(ip)
         cprint(lol, 'red')
         if ifhostup(ip):
             cprint("[+] host is up. scanning...", 'red')
             messg = os.system("nmap -p 21 --ftp-anon.nse ", ip) 
             command = 'echo "'  + str(messg) + '" | grep -o "Anonymous FTP login allowed"' 
             if os.system(command) != "":
                 lol = "[+]ftp anon on host :" + str(ip)
                 cprint(lol, "red")
             else:
                 lol = "[-]no ftp anon on:" + str(ip)
         else:
             cprint("[-] host down.", 'red')


if __name__ == '__main__':
    main()
